cmake_minimum_required(VERSION 3.10)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)
project(SingleFlight)
IF(UNIX)
###########################code Definetion##################
    add_definitions(-DRPiDEBUGStart)
    add_definitions(-DRPiDEBUG)
#############################################################
    cmake_minimum_required(VERSION 3.10)
    find_library(wiringPi_LIB wiringPi)
    find_package(Threads REQUIRED)
    add_subdirectory(src)
    add_executable(SingleAPM "TestModule.cpp")
    target_link_libraries(SingleAPM PRIVATE  RPiSingleAPI)
    target_link_libraries(SingleAPM PRIVATE Threads::Threads)
    target_link_libraries(SingleAPM PRIVATE  ${wiringPi_LIB})
ENDIF()